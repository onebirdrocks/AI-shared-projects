{"ast":null,"code":"var _jsxFileName = \"/Users/onebird/Desktop/chat_with_pdf_by_cursor/frontend/src/components/FileUpload.tsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FileUpload = ({\n  onFileUploaded,\n  onError,\n  apiUrl\n}) => {\n  _s();\n  const [uploading, setUploading] = useState(false);\n  const onDrop = useCallback(async acceptedFiles => {\n    const file = acceptedFiles[0];\n    if (file) {\n      setUploading(true);\n      const formData = new FormData();\n      formData.append('file', file);\n      try {\n        const response = await axios.post(`${apiUrl}/upload-pdf`, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        onFileUploaded(response.data.file_name);\n      } catch (error) {\n        if (axios.isAxiosError(error) && error.response) {\n          onError(error.response.data.error || '上传文件时发生错误');\n        } else {\n          onError('上传文件时发生未知错误');\n        }\n      } finally {\n        setUploading(false);\n      }\n    }\n  }, [onFileUploaded, onError, apiUrl]);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    accept: {\n      'application/pdf': ['.pdf']\n    },\n    multiple: false\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ...getRootProps(),\n    className: \"mb-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      ...getInputProps()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-2 border-dashed border-blue-400 rounded-lg p-6 text-center cursor-pointer hover:bg-blue-50 transition duration-300\",\n      children: uploading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-blue-500\",\n        children: \"\\u4E0A\\u4F20\\u4E2D...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this) : isDragActive ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-blue-500\",\n        children: \"\\u5C06PDF\\u6587\\u4EF6\\u62D6\\u653E\\u5230\\u6B64\\u5904...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-blue-500 mb-2\",\n          children: \"\\u62D6\\u653EPDF\\u6587\\u4EF6\\u5230\\u6B64\\u5904\\uFF0C\\u6216\\u70B9\\u51FB\\u9009\\u62E9\\u6587\\u4EF6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition duration-300\",\n          children: \"\\u9009\\u62E9PDF\\u6587\\u4EF6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n_s(FileUpload, \"a+DxLM2ML4pMFgtPQv1bSWO3Kdw=\", false, function () {\n  return [useDropzone];\n});\n_c = FileUpload;\nexport default FileUpload;\nvar _c;\n$RefreshReg$(_c, \"FileUpload\");","map":{"version":3,"names":["React","useCallback","useState","useDropzone","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","FileUpload","onFileUploaded","onError","apiUrl","_s","uploading","setUploading","onDrop","acceptedFiles","file","formData","FormData","append","response","post","headers","data","file_name","error","isAxiosError","getRootProps","getInputProps","isDragActive","accept","multiple","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/onebird/Desktop/chat_with_pdf_by_cursor/frontend/src/components/FileUpload.tsx"],"sourcesContent":["import React, { useCallback, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport axios from 'axios';\n\ninterface FileUploadProps {\n  onFileUploaded: (fileName: string) => void;\n  onError: (error: string) => void;\n  apiUrl: string;\n}\n\nconst FileUpload: React.FC<FileUploadProps> = ({ onFileUploaded, onError, apiUrl }) => {\n  const [uploading, setUploading] = useState<boolean>(false);\n\n  const onDrop = useCallback(async (acceptedFiles: File[]) => {\n    const file = acceptedFiles[0];\n    if (file) {\n      setUploading(true);\n      const formData = new FormData();\n      formData.append('file', file);\n      try {\n        const response = await axios.post(`${apiUrl}/upload-pdf`, formData, {\n          headers: { 'Content-Type': 'multipart/form-data' },\n        });\n        onFileUploaded(response.data.file_name);\n      } catch (error) {\n        if (axios.isAxiosError(error) && error.response) {\n          onError(error.response.data.error || '上传文件时发生错误');\n        } else {\n          onError('上传文件时发生未知错误');\n        }\n      } finally {\n        setUploading(false);\n      }\n    }\n  }, [onFileUploaded, onError, apiUrl]);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ \n    onDrop,\n    accept: {'application/pdf': ['.pdf']},\n    multiple: false\n  });\n\n  return (\n    <div {...getRootProps()} className=\"mb-4\">\n      <input {...getInputProps()} />\n      <div className=\"border-2 border-dashed border-blue-400 rounded-lg p-6 text-center cursor-pointer hover:bg-blue-50 transition duration-300\">\n        {uploading ? (\n          <p className=\"text-blue-500\">上传中...</p>\n        ) : isDragActive ? (\n          <p className=\"text-blue-500\">将PDF文件拖放到此处...</p>\n        ) : (\n          <>\n            <p className=\"text-blue-500 mb-2\">拖放PDF文件到此处，或点击选择文件</p>\n            <button className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition duration-300\">\n              选择PDF文件\n            </button>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default FileUpload;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}