{"ast":null,"code":"import React,{useCallback,useState}from'react';import{useDropzone}from'react-dropzone';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FileUpload=_ref=>{let{onFileUploaded}=_ref;const[uploading,setUploading]=useState(false);const[fileName,setFileName]=useState('');const onDrop=useCallback(async acceptedFiles=>{const file=acceptedFiles[0];if(file){setFileName(file.name);setUploading(true);const formData=new FormData();formData.append('file',file);try{const response=await axios.post('http://localhost:8000/upload-pdf',formData,{headers:{'Content-Type':'multipart/form-data'}});onFileUploaded(response.data.file_name);}catch(error){console.error('Error uploading file:',error);}finally{setUploading(false);}}},[onFileUploaded]);const{getRootProps,getInputProps,isDragActive}=useDropzone({onDrop,accept:'application/pdf',multiple:false});return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{...getRootProps(),className:\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-500 transition duration-300\",children:[/*#__PURE__*/_jsx(\"input\",{...getInputProps()}),uploading?/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-600\",children:\"\\u4E0A\\u4F20\\u4E2D...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12 text-gray-400\",stroke:\"currentColor\",fill:\"none\",viewBox:\"0 0 48 48\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-4 text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-blue-600 hover:text-blue-500\",children:\"\\u70B9\\u51FB\\u4E0A\\u4F20\\u6587\\u4EF6\"}),' ',\"\\u6216\\u62D6\\u62FD\\u6587\\u4EF6\\u5230\\u8FD9\\u91CC\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-xs text-gray-500\",children:\"\\u4EC5\\u652F\\u6301 PDF \\u6587\\u4EF6 (\\u6700\\u5927 10MB)\"})]})]}),fileName&&!uploading&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex items-center justify-between bg-gray-50 p-2 rounded\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:fileName}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFileName(''),className:\"text-red-500 hover:text-red-700\",children:\"\\u5220\\u9664\"})]})]});};export default FileUpload;","map":{"version":3,"names":["React","useCallback","useState","useDropzone","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FileUpload","_ref","onFileUploaded","uploading","setUploading","fileName","setFileName","onDrop","acceptedFiles","file","name","formData","FormData","append","response","post","headers","data","file_name","error","console","getRootProps","getInputProps","isDragActive","accept","multiple","className","children","stroke","fill","viewBox","d","strokeWidth","strokeLinecap","strokeLinejoin","onClick"],"sources":["/Users/onebird/Desktop/chat_with_pdf_by_cursor/frontend/src/components/FileUpload.tsx"],"sourcesContent":["import React, { useCallback, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport axios from 'axios';\n\ninterface FileUploadProps {\n  onFileUploaded: (fileName: string) => void;\n}\n\nconst FileUpload: React.FC<FileUploadProps> = ({ onFileUploaded }) => {\n  const [uploading, setUploading] = useState<boolean>(false);\n  const [fileName, setFileName] = useState<string>('');\n\n  const onDrop = useCallback(async (acceptedFiles: File[]) => {\n    const file = acceptedFiles[0];\n    if (file) {\n      setFileName(file.name);\n      setUploading(true);\n      const formData = new FormData();\n      formData.append('file', file);\n      try {\n        const response = await axios.post('http://localhost:8000/upload-pdf', formData, {\n          headers: { 'Content-Type': 'multipart/form-data' },\n        });\n        onFileUploaded(response.data.file_name);\n      } catch (error) {\n        console.error('Error uploading file:', error);\n      } finally {\n        setUploading(false);\n      }\n    }\n  }, [onFileUploaded]);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: 'application/pdf',\n    multiple: false\n  });\n\n  return (\n    <div className=\"w-full\">\n      <div\n        {...getRootProps()}\n        className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-blue-500 transition duration-300\"\n      >\n        <input {...getInputProps()} />\n        {uploading ? (\n          <p className=\"text-blue-600\">上传中...</p>\n        ) : (\n          <>\n            <svg className=\"mx-auto h-12 w-12 text-gray-400\" stroke=\"currentColor\" fill=\"none\" viewBox=\"0 0 48 48\" aria-hidden=\"true\">\n              <path d=\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n            </svg>\n            <p className=\"mt-4 text-sm text-gray-600\">\n              <span className=\"font-medium text-blue-600 hover:text-blue-500\">\n                点击上传文件\n              </span>\n              {' '}或拖拽文件到这里\n            </p>\n            <p className=\"mt-1 text-xs text-gray-500\">仅支持 PDF 文件 (最大 10MB)</p>\n          </>\n        )}\n      </div>\n      {fileName && !uploading && (\n        <div className=\"mt-4 flex items-center justify-between bg-gray-50 p-2 rounded\">\n          <span className=\"text-sm text-gray-600\">{fileName}</span>\n          <button\n            onClick={() => setFileName('')}\n            className=\"text-red-500 hover:text-red-700\"\n          >\n            删除\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FileUpload;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}